---
title: 前端面试 JS部分 异步和单线程
date: 2017-07-06 19:15:03
tags: 
- JS
categories: [JS]
---
<p></p>
<!-- more -->
## 基础知识 ##

### 异步和单线程###


*知识点*

** 什么是异步，同步 **

```
console.log(100)
setTimeout(function(){
  console.log(200)
  }, 100)
console.log(300);//100 300 200
```

异步不阻塞程序的进行

```
console.log(100)
alert(200)//点击之后才继续执行
console.log(300)
```

同步阻塞程序

** 前端使用异步的场景 **

*  在可能发生等待的情况
*  等待过程中不能像alert一样阻塞程序运行
*  因此，所有的等待情况都需要异步
比如
*  定时任务:setTimeout,setInterval
*  网络请求:ajax请求，动态<img>加载
```
console.log('start')
var img = document.createElement('img')
img.onload = function(){//加载完成后执行
  console.log('loaded');
}
img.src = '/xxx.png'
console.log('end');
//start
//end
//loaded

console.log('start')
document.getElementById('btn1').addEventListener('click', function(){
  alert('clicked');
  })
console.log('end')
//start
//end
//点击后弹出clicked
```
*  事件绑定

** 异步和单线程 **
拿最上面的打印100,300,200的代码块举例，体现单线程
*  执行第一行，打印100
*  执行setTimeout后，传入setTimeout的函数会被暂存起来，不会立即执行
*  执行最后一行，打印300
*  等所有程序执行完，处于空闲状态时，再查看有没有暂存起来的程序需要执行
*  发现暂存起来的setTimeout中的函数需要执行，且有等待时间100ms，所以先等待
100ms, 然后立即拿来执行
(单线程执行任务只能一个个来做)



*题目*

*  同步和异步的区别?分别举一个同步和异步的例子
*  关于setTimeout
```
console.log(1)
setTimeout(function(){
    console.log(2)
  },0)
console.log(3)
setTimeout(function(){
  console.log(4)
  },1000)
console.log(5)//打印结果为1,3,5,2,4
```

当第一个setTimeout的等待值设的大于第二个等待值时，会先执行第二个，再执行第一个

*  前端使用异步的场景




---
title: 前端面试 JS部分 事件
date: 2017-07-04 19:15:03
tags: 
- JS
categories: [JS]
---
<p></p>
<!-- more -->
## 基础知识 ##

### 事件 ###


*知识点*

** 通用事件绑定 **
```javascript
var btn = document.getElementById('btn1')
btn.addEventListener('click', function(event){//原生
  console.log('clicked')
  })

function bindEvent(elem, type, fn){
  elem.addEventListener(type, fn)
}

var a = document.getElementById('link1')
bindEvent(a, 'click', function(e){
  e.preventDefault();//阻止默认行为,此处a为a标签，被点击时的默认行为是跳转，所
  //以要阻止默认行为
  alert('clicked');
  })
```

** 关于IE低版本兼容性 **
*  IE低版本使用attachEvent绑定事件，和W3C标准不一样
*  IE低版本使用量非常少，很多网站都早已不支持

** 事件冒泡 **
```html
<!DOCTYPE html>
<html>
<head>
  <title></title>
</head>
<body>
  <div id="div1">
    <p id="p1">激活</p>
    <p id="p2">取消</p>
    <p id="p3">取消</p>
    <p id="p4">取消</p>
  </div>
  <div id="div2">
    <p id="p5">取消</p>
    <p id="p6">取消</p>
  </div>
</body>
</html>
```

```javascript
var p1 = document.getElementById('p1')
var body = document.body
bindEvent(p1, 'click', function(e){
  e.stopPropatation()//阻止向父级以上元素冒泡
  alert('激活');
  })
bindEvent(body, 'click', function(e){
  alert('取消');
  })
```

** 代理 **
```html
<!DOCTYPE html>
<html>
<head>
  <title></title>
</head>
<body>
  <div id="div1">
    <a href="#">a1</a>
    <a href="#">a2</a>
    <a href="#">a3</a>
    <a href="#">a4</a>
    <!-- 随时新增更多a标签-->
  </div>
</body>
</html>
```

```javascript
var div1 = document.getElementById('div1')
div1.addEventListener('click', function(e){
  var target = e.target;
  if(target.nodeName === 'A'){
    alert(target.innerHTML)
  }
  })
```

** 代理 **
```javascript
function bindEvent(elem, type, selector, fn){
  if(fn == null){
    fn = selector
    selector = null
  }
  elem.addEventListener(type, function(e){
    var target;
    if(selector){
      target = e.target
      if(target.matches(selector)){
        fn.call(target, e)
      }
    }else{
      fn(e)
    }
  })
}


//使用代理
var div1 = document.getElementById('div1')
bindEvent(div1, 'click', 'a', function(e){//使用div1作为a的代理，div1监听到事
  //件click后，判断事件来源是否是a标签，是的话打印a中的html
  console.log(this.innerHTML)
  })

//不使用代理
var a = document.getElementById('a1')
bindEvent(a, 'click', funciton(e){//a1监听到click事件后，直接执行fn函数
  console.log(a.innerHTML)
  })
```

代理的好处:
* 代码简洁
* 减少浏览器内存占用



*题目*

*  编写一个通用的事件监听函数
*  描述事件冒泡流程
*  对于一个无限下拉加载图片的页面，如何给每个图片绑定事件 (运用代理)






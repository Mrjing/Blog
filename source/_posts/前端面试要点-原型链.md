---
title: 前端面试 JS部分 原型和原型链
date: 2017-07-05 19:15:03
tags: 
- JS
categories: [JS]
---
<p></p>
<!-- more -->
## 基础知识 ##

### 原型和原型链 ###


*知识点*

** 构造函数 **
```javascript
function Foo(name, age){
  this.name = name;
  this.age = age;
  this.class = 'class-1'
  //return this //默认有这一行
}
var f = new Foo('zhangsan', 20)
```


** 构造函数-扩展 **
var a = {} 其实是var a = new Object()的语法糖(a的构造函数为Object)
var a = [] 其实是var a = new Array()的语法糖(a的构造函数为Array)
function Foo(){} 其实是var Foo = new Function()(Foo的构造函数为Function)
使用instanceof 判断一个函数是否是一个变量的构造函数

** 原型规则和示例 **

*  所有的引用类型(数组，对象，函数)，都具有对象特性，即可自由扩展属性(null除外)
*  所有的引用类型(数组，对象，函数),  都有一个__proto__ (隐式原型)属性,属性值是
一个普通的对象
*  所有的函数，都有一个prototype(显式原型)属性，属性值也是一个普通的对象
*  所有的引用类型(数组，对象，函数)，__proto__属性值指向它的构造函数的
"prototype"属性值
*  当试图得到一个对象的某个属性时，如果这个对象本身没有这个属性，那么会去它的__proto__(即它的构造函数的prototype)中寻找

```javascript
//一个栗子
//构造函数
function Foo(name, age){
  this.name = name;
}

Foo.prototype.alertName = function(){
  alert(this.name);
}

var f = new Foo('zhangsan')
f.printName = function(){
  console.log(this.name)
}

//测试
f.printName()
f.alertName() //要去f.__proto__中查找
f.toString() //要去f.__proto__.__proto__中查找(此时查找的应该是Object.prototype
, 这也是对象，但是它的__proto__为null, 属于JS特例，这个栗子就解释了原型链)

for(item in f){
  //高级浏览器已经在for in 中屏蔽了来自原型的属性，但是建议加上这个判断，保证
  //程序的健壮性
  if(f.hasOwnProperty(item)){
    //...
  }
}
```


** instanceof **
如何判断引用类型属于哪个构造函数?

判断逻辑: 从该引用类型的__proto__一层层往上找，看能否找到构造函数的prototype与
之对应

*题目*

* 如何准确判断一个变量是数组类型
  变量 instanceof Array
* 写一个原型链继承的例子

```javascript
function Elem(id) {
  this.elem = document.getElementById(id)
}

Elem.prototype.html = function(val){
  var elem = this.elem;
  if(val){
    elem.innerHTML = val;
    return this;//方便链式操作
  }else{
    return elem.innerHTML;
  }
}

Elem.prototype.on = function (type, fn){
  var elem = this.elem;
  elem.addEventListener(type, fn);
  return this;
}

var div1 = new Elem('div1');
console.log(div1.html());
div1.html('<p>hello</p>').on('click', function(){
  alert('hello');
  })
```

*  描述new一个对象的过程
  
  1. 创建一个新对象
  2. this指向这个新对象
  3. 执行代码，即对this赋值
  4. 返回this  

*  zepto源码中如何使用原型链
 (源码暂未读>_<)


 

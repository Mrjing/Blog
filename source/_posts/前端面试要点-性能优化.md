---
title: 前端面试 JS部分 性能优化
date: 2017-07-10 19:15:03
tags: 
- JS
categories: [JS]
---
<p></p>
<!-- more -->
## 基础知识 ##

### 性能优化 ###


*知识点*
性能优化原则:
*  多使用内存，缓存或其他方法
*  减少cpu计算，减少网络请求

** 加载资源优化 **
*  静态资源的压缩合并(如webpack合并js)
*  静态资源缓存(通过资源链接名称控制缓存，只有内容改变的时候，才改变链接名
称)
*  使用CDN让资源加载更快(使用cdn比在自己的服务器上放置资源供用户访问快很多)
*  使用SSR后端渲染，数据直接输出到HTML中

** 渲染优化 **
*  CSS放前面，JS放后面
*  懒加载(图片懒加载，下拉加载更多)
```html
<!-- 先放一张小图快速显示，之后在异步加载大图  -->
<img id="img1" src="preview.png" data-realsrc="abc.png">
<script type="text/javascript">
  var img1 = document.getElementById("img1")
  img1.src = img1.getAttribute('data-realsrc')
</script>
```

*  减少DOM查询，对DOM查询做缓存
```javascript
//未缓存DOM查询
var i;
for (i = 0;i < document.getElementsByTagName('p').length;i++){
  //todo
}

//缓存了DOM查询
var pList = document.getElementsByTagName('p');
var i;
for(i = 0;i < pList.length;i++){
  //todo
}

```

*  减少DOM操作，多个操作尽量合并在一起执行
```
var listNode = document.getElementById('list')

//要插入10个li标签
var frag = document.createDocumentFragment();
var x, li;
for(x = 0;x < 10;x++){
  li = document.creatElement("li")
  li.innerHTML = "List item" + x;
  frag.appendChild(li);
}
listNode.appendChild(frag)//一次性插入一个片段
```

*  事件节流
*  尽早执行操作(如使用DOMContentLoaded)


*题目*








